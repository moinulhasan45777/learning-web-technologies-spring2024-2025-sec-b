<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <style>
      input {
        text-align: right;
      }
    </style>
  </head>
  <body>
    <h1>Calculator</h1>
    <table>
      <tr>
        <td colspan="4"><input type="text" id="display" name="display" /></td>
      </tr>
      <tr>
        <td><input type="button" id="number-7" value="7" /></td>
        <td><input type="button" id="number-8" value="8" /></td>
        <td><input type="button" id="number-9" value="9" /></td>
        <td><input type="button" id="division" value="/" /></td>
      </tr>
      <tr>
        <td><input type="button" id="number-4" value="4" /></td>
        <td><input type="button" id="number-5" value="5" /></td>
        <td><input type="button" id="number-6" value="6" /></td>
        <td><input type="button" id="multiplication" value="X" /></td>
      </tr>
      <tr>
        <td><input type="button" id="number-1" value="1" /></td>
        <td><input type="button" id="number-2" value="2" /></td>
        <td><input type="button" id="number-3" value="3" /></td>
        <td><input type="button" id="subtraction" value="-" /></td>
      </tr>
      <tr>
        <td><input type="button" id="addition" value="+" /></td>
        <td><input type="button" id="number-0" value="0" /></td>
        <td><input type="button" id="cancel" value="C" /></td>
        <td><input type="button" id="result" value="=" /></td>
      </tr>
    </table>

    <script>
      const display = document.getElementById("display");
      let tempValue = 0;
      let lastPressed = "";

      const number0 = document.getElementById("number-0");
      const number1 = document.getElementById("number-1");
      const number2 = document.getElementById("number-2");
      const number3 = document.getElementById("number-3");
      const number4 = document.getElementById("number-4");
      const number5 = document.getElementById("number-5");
      const number6 = document.getElementById("number-6");
      const number7 = document.getElementById("number-7");
      const number8 = document.getElementById("number-8");
      const number9 = document.getElementById("number-9");
      const addButton = document.getElementById("addition");
      const divButton = document.getElementById("division");
      const multiButton = document.getElementById("multiplication");
      const subButton = document.getElementById("subtraction");
      const cancelButton = document.getElementById("cancel");
      const resultButton = document.getElementById("result");

      display.readOnly = true;
      display.value = 0;

      document.addEventListener("keydown", function (e) {
        if (e.key === "c" || e.key === "C") {
          display.value = 0;
          tempValue = 0;
        }
      });

      cancelButton.addEventListener("click", function () {
        display.value = 0;
        tempValue = 0;
      });

      number0.addEventListener("click", function () {
        if (display.value !== "0" && display.value.length <= 7) {
          display.value = display.value + "0";
        }
      });

      number1.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "1";
        } else if (display.value.length <= 7) {
          display.value = display.value + "1";
        }
      });
      number2.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "2";
        } else if (display.value.length <= 7) {
          display.value = display.value + "2";
        }
      });
      number3.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "3";
        } else if (display.value.length <= 7) {
          display.value = display.value + "3";
        }
      });
      number4.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "4";
        } else if (display.value.length <= 7) {
          display.value = display.value + "4";
        }
      });
      number5.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "5";
        } else if (display.value.length <= 7) {
          display.value = display.value + "5";
        }
      });
      number6.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "6";
        } else if (display.value.length <= 7) {
          display.value = display.value + "6";
        }
      });
      number7.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "7";
        } else if (display.value.length <= 7) {
          display.value = display.value + "7";
        }
      });
      number8.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "8";
        } else if (display.value.length <= 7) {
          display.value = display.value + "8";
        }
      });
      number9.addEventListener("click", function () {
        if (display.value === "0") {
          display.value = "9";
        } else if (display.value.length <= 7) {
          display.value = display.value + "9";
        }
      });

      addButton.addEventListener("click", function () {
        tempValue = tempValue + Number(display.value);
        display.value = "0";
        lastPressed = "addition";
      });

      subButton.addEventListener("click", function () {
        tempValue = tempValue - Number(display.value);
        display.value = "0";
        lastPressed = "subtraction";
      });
      multiButton.addEventListener("click", function () {
        if (tempValue === 0) {
          tempValue += 1;
        }

        tempValue = tempValue * Number(display.value);
        display.value = "0";
        lastPressed = "multiplication";
      });
      divButton.addEventListener("click", function () {
        tempValue = tempValue / Number(display.value);
        display.value = "0";
        lastPressed = "division";
      });
      resultButton.addEventListener("click", function () {
        if (lastPressed === "addition") {
          tempValue = tempValue + Number(display.value);
          display.value = tempValue;
        } else if (lastPressed === "subtraction") {
          tempValue = tempValue - Number(display.value);
          display.value = tempValue;
        } else if (lastPressed === "multiplication") {
          tempValue = tempValue * Number(display.value);
          display.value = tempValue;
        } else if (lastPressed === "division") {
          tempValue = tempValue / Number(display.value);
          display.value = tempValue;
        }
      });
    </script>
  </body>
</html>
